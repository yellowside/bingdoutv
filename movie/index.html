<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>冰豆影视 - 全网海量影片数据</title>
<meta name="Keywords" content="热播电视剧,在线观看,蓝光电影,美剧,韩剧,超清电影" />
<meta name="description" content="冰豆影视是一家免费全球影视资源在线观看的平台,拥有海量、优质、超清蓝光电影和全球的电视剧,高画质在线动漫。" />
<link href="https://lib.baomitu.com/twitter-bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
<link href="https://cdnjs.bingdou.com.cn/bingdoulive/css/style.css" rel="stylesheet">
<link href="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script type="text/javascript" src="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.3.1/jquery.min.js"></script>
<style type="text/css">
.home-search{position:relative}.home-search-container{padding:80px 200px;text-align:center}.home-search-container h2{font-size:38px;-webkit-font-smoothing:auto;font-weight:300}.home-search-container h3{font-size:16px;font-weight:400;padding:5px 0 15px;color:#757575}.search-box-wrap{padding-top:20px;position:relative}.search-box{background:#dbdee2;border-radius:10px;padding:5px;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.search-input{font-size:16px;background:#fff;height:50px;width:100%;border-radius:7px 0 0 7px;padding:0 10px 0 44px;-webkit-flex:1;-ms-flex:1;flex:1}.search-btn{padding:0 18px;font-size:16px;font-weight:700;border-radius:0 7px 7px 0;background:#fff}.search-box .icon-search{position:absolute;left:23px;top:22px;font-weight:700;color:#a0a0a0;font-size:14px}.search-advice{position:absolute;display:none;width:100%;margin-top:-9px;background:#fff;border:5px solid #dbdee2;border-top-width:0;border-radius:0 0 10px 10px;z-index:999}.search-advice.open{display:block}.page-header .search-box-wrap{position:absolute;left:158px;padding:0}.page-header .search-box{width:500px;padding:2px}.page-header .search-box .icon-search{left:16px;top:14px}.page-header .search-input{padding-left:38px;height:40px;border-radius:8px 0 0 8px}.page-header .search-btn{background:#fff;border-radius:0 8px 8px 0}.page-header .search-advice{border-width:2px;border-top:0;margin-top:-3px}.page-header .search-box.open{border-radius:10px 10px 0 0}.page-header .search-box.open .search-input{border-bottom-left-radius:0}.page-header .search-box.open .search-btn{border-bottom-right-radius:0}@media (max-width: 1122px){.home-search-container{padding:100px 150px}}@media (max-width: 999px){.home-search::after{background-size:70%}.home-search-container{padding:60px 80px}.home-search-container h2{font-size:30px}.page-header .search-box-wrap{left:60px}.page-header .search-box{width:380px}}@media (max-width: 559px){.page-header .search-box-wrap{left:55px}.page-header .search-box{width:calc(100vw - 108px);background:#fff;box-shadow:0px 0 10px 0 rgba(0,0,0,0.15),0 0 1px rgba(0,0,0,0.1);padding:1px}.page-header .search-input{height:36px;border-radius:9px;font-size:14px}.page-header .search-btn{font-size:14px}.page-header .search-box .icon-search{left:14px;top:12px;font-size:14px}.search-advice{border:0;box-shadow:0px 0 10px 0 rgba(0,0,0,0.15),0 0 1px rgba(0,0,0,0.1)}.search-advice:before{content:'';position:absolute;left:0;width:100%;background:#fff;height:10px;top:-8px}.home-search-container h2{font-size:24px;color:#424242}.home-search-container h3{font-weight:300;padding-top:0}.home-search-container h3 span{display:none}.search-box{padding:0}.home-search .search-box{background:#fff;box-shadow:0px 0 15px 0 rgba(0,0,0,0.15),0 0 1px rgba(0,0,0,0.1)}.home-search .search-box .icon-search{left:20px;top:18px;font-size:15px}.home-search::after{background-size:60%}.search-input{border-radius:12px;font-size:14px}.search-advice{margin-top:0}.search-btn{border-radius:0 10px 10px 0}.search-box-wrap{padding-top:15px}}
</style>
</head>
<body oncontextmenu="return false" onselectstart="return false">
<header>
  <div class="header wrap">
  <h1 class="logo"><a href="/" title="冰豆影视"><i class="fa fa-video-camera"></i>冰豆影视</a></h1>
  <div class="menu">
    <div class="menu-icon"></div>
    <div class="menu-container" id="menu"></div>
  </div>
</div>
</header>
<main class="wrap">
  <section class="home-search">
    <div class="home-search-container">
        <h2>全网海量影片数据</h2>
        <h3><span>高清影视资源，免费在线播放。</span></h3>
        <div class="search-box-wrap">
            <form id="form1" action="./" method="get">
                <div class="search-box">
                    <i class="icon-search fa fa-search"></i>
                    <input class="search-input" type="text" name="wd" id="keyword" autocomplete="off" placeholder="输入影片关键字" value="" />
                    <button class="search-btn">立即搜索</button>
                </div>
                <div class="search-advice">
                    <ul id="advice"></ul>
                </div>
            </form>
        </div>
    </div>
</section>
  <section class="list wrap-inner">
    <div class="list-header">
      <h3 id="result-title">猜你喜欢</h3>
    </div>
    <div class="list-w list-box playlist" id="playlist-container">
      <p>正在加载影片...</p>
    </div>
  </section>
</main>
<footer id="foot"></footer>
<script src="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.6.0/jquery.min.js"></script>
<script>
$('#menu').load('../menu.html');
$('#foot').load('../foot.html');
</script>
<script>
  // 获取 URL 中的 wd 参数
  const urlParams = new URLSearchParams(window.location.search);
  const keyword = urlParams.get('wd');

  const resultTitle = document.getElementById('result-title');
  const playlistContainer = document.getElementById('playlist-container');

  function loadRecommend() {
    fetch('https://json.bingdou.cc/film/list/?id=yingshi')
      .then(res => res.json())
      .then(data => {
        if (!data || !data.data || !Array.isArray(data.data.list)) {
          playlistContainer.innerHTML = '<p>无法获取推荐影片数据</p>';
          return;
        }

        playlistContainer.innerHTML = '';
        data.data.list.forEach(movie => {
          const li = document.createElement('li');
          const a = document.createElement('a');
          a.href = `../film/player/?id=${movie.id}`;
          a.textContent = movie.name;
          a.target = '_blank';
          li.appendChild(a);
          playlistContainer.appendChild(li);
        });
      })
      .catch(err => {
        console.error('加载失败:', err);
        playlistContainer.innerHTML = `<p style="color:red;">加载失败，请刷新重试</p>`;
      });
  }

  function searchMovies(keyword) {
    resultTitle.innerText = `搜索《${keyword}》结果如下`;
    fetch(`https://json.bingdou.cc/movie/list/json/?wd=${encodeURIComponent(keyword)}`)
      .then(res => res.json())
      .then(data => {
        if (!data || !data.data || !Array.isArray(data.data.list)) {
          playlistContainer.innerHTML = '<p>没有找到相关影片</p>';
          return;
        }

        let html = `
          <table class="table">
            <thead>
              <tr>
                <th>ID</th>
                <th>片名</th>
                <th>分类</th>
                <th>来源</th>
                <th class="movietimes">更新时间</th>
                <th>播放</th>
              </tr>
            </thead>
            <tbody>
        `;

        data.data.list.forEach(movie => {
          html += `
            <tr>
              <td>${movie.vod_id}</td>
              <td><a href="./player/?zy=${movie.vod_play_from}&id=${movie.vod_id}" target="_blank">${movie.vod_name}</a></td>
              <td>${movie.type_name}</td>
              <td>${movie.vod_remarks}</td>
              <td class="movietime">${movie.vod_time}</td>
              <td><a href="./player/?zy=${movie.vod_play_from}&id=${movie.vod_id}" target="_blank"><i class="fa fa-play-circle-o fa-2x"></i></a></td>
            </tr>
          `;
        });

        html += '</tbody></table>';
        playlistContainer.innerHTML = html;
      })
      .catch(err => {
        console.error('搜索失败:', err);
        playlistContainer.innerHTML = `<p style="color:red;">搜索失败，请刷新重试</p>`;
      });
  }

  // 页面初始化逻辑
  window.onload = () => {
    if (keyword) {
      document.getElementById('keyword').value = keyword;
      searchMovies(keyword);
    } else {
      loadRecommend();
    }
  };

  // 表单提交事件监听
  document.getElementById('form1').addEventListener('submit', function(e) {
    e.preventDefault();
    const wd = document.getElementById('keyword').value.trim();
    if (!wd) {
      alert('请输入搜索关键词');
      return;
    }
    const newUrl = `?wd=${encodeURIComponent(wd)}`;
    window.location.href = newUrl;
  });
</script>
</body>
</html>